(()=>{var t={n:o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return t.d(e,{a:e}),e},d:(o,e)=>{for(var r in e)t.o(e,r)&&!t.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:e[r]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o)};(()=>{"use strict";const o=flarum.core.compat["forum/app"];var e=t.n(o);const r=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/LogInButtons"];var a=t.n(n);const i=flarum.core.compat["forum/components/LogInButton"];var u=t.n(i);const p=flarum.core.compat["forum/components/HeaderSecondary"];var s=t.n(p);const m=flarum.core.compat["common/utils/ItemList"];var c=t.n(m),l=new URLSearchParams(window.location.search),d=l.get("oauth_token");if(d){var h={token:d},f=l.get("oauth_username"),g=l.get("oauth_email"),b=l.get("oauth_provided");f&&(h.username=f),g&&(h.email=g),b&&(h.provided=b.split(",")),window.history.replaceState({},document.title,window.location.pathname+window.location.hash),e().authenticationComplete(h)}document.addEventListener("click",function(t){var o=t.target.closest("button.LogInButton, a.LogInButton");o&&(o.getAttribute("path")||o.getAttribute("href")||"").includes("/auth/passport")&&(t.preventDefault(),t.stopPropagation(),function(t){if(e().forum.attribute("importAiOAuthPassport.fullscreenPopup"))window.open(e().forum.attribute("baseUrl")+t,"logInPopup","fullscreen=yes");else{var o=e().forum.attribute("importAiOAuthPassport.popupWidth")||580,r=e().forum.attribute("importAiOAuthPassport.popupHeight")||400,n=window.innerHeight/2-r/2,a=window.innerWidth/2-o/2;window.open(e().forum.attribute("baseUrl")+t,"logInPopup","width="+o+",height="+r+",top="+n+",left="+a+",status=no,scrollbars=yes,resizable=no")}}("/auth/passport"))},!0),(0,r.extend)(s().prototype,"items",function(t){if(e().forum){var o=e().forum.attribute("importAiOAuthPassport.replaceLoginSignup"),r=e().forum.attribute("importAiOAuthPassport.enabled");o&&r&&!e().session.user&&t.add("oauth-login",u().component({className:"Button Button--link",icon:e().forum.attribute("importAiOAuthPassport.loginIcon"),path:"/auth/passport"},e().forum.attribute("importAiOAuthPassport.loginTitle")),15)}}),function t(){e().forum?function(){var t,o=e().forum.attribute("importAiOAuthPassport.buttonColor"),r=e().forum.attribute("importAiOAuthPassport.buttonTextColor"),n=e().forum.attribute("importAiOAuthPassport.replaceLoginSignup");if(o||r){var a=document.createElement("style");a.textContent="\n      .LogInButton--passport {\n        "+(o?"background-color: "+o+" !important;":"")+"\n        "+(r?"color: "+r+" !important;":"")+"\n      }\n      .LogInButton--passport:hover,\n      .LogInButton--passport:focus {\n        "+(o?"background-color: "+(t=parseInt(o.replace("#",""),16),"#"+(Math.min(255,Math.max(0,(t>>16)-20))<<16|Math.min(255,Math.max(0,(t>>8&255)-20))<<8|Math.min(255,Math.max(0,(255&t)-20))).toString(16).padStart(6,"0")+" !important;"):"")+"\n      }\n    ",document.head.appendChild(a)}if(n){var i=document.createElement("style");i.textContent="\n      .LogInModal .Form--centered > .Form-group:first-child,\n      .LogInModal .Form--centered > .Form-group:nth-child(2),\n      .LogInModal .Form--centered > .Form-group:nth-child(3),\n      .LogInModal .Form--centered > .Form-group:last-child,\n      .LogInModal .LogInModal-divider,\n      .LogInModal .Modal-footer {\n        display: none !important;\n      }\n    ",document.head.appendChild(i)}}():setTimeout(t,10)}(),function t(){if(e().forum){var o=e().forum.attribute("importAiOAuthPassport.enabled"),n=e().forum.attribute("importAiOAuthPassport.replaceLoginSignup");if(o)if(n){var i=document.createElement("style");i.textContent=".Header-secondary .item-logIn, .Header-secondary .item-signUp { display: none !important; }",document.head.appendChild(i),(0,r.override)(a().prototype,"items",function(){var t=new(c());return t.add("import-ai-oauth-passport",u().component({className:"Button LogInButton--passport",icon:e().forum.attribute("importAiOAuthPassport.loginIcon"),path:"/auth/passport"},e().forum.attribute("importAiOAuthPassport.loginTitle"))),t})}else(0,r.extend)(a().prototype,"items",function(t){t.add("import-ai-oauth-passport",u().component({className:"Button LogInButton--passport",icon:e().forum.attribute("importAiOAuthPassport.loginIcon"),path:"/auth/passport"},e().forum.attribute("importAiOAuthPassport.loginTitle")))})}else setTimeout(t,10)}()})(),module.exports={}})();
//# sourceMappingURL=forum.js.map